% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_footprints.R
\name{calculate_footprints}
\alias{calculate_footprints}
\title{Calculate Complete Environmental Footprints Along Supply Chains}
\usage{
calculate_footprints(
  CBS,
  Primary_all,
  Impact_prod,
  Crop_NPPr_NoFallow,
  DTM = NULL,
  trade_mode = "gt"
)
}
\arguments{
\item{CBS}{Commodity Balance Sheets data frame with columns: Year, area, area_code, item, item_code, Element, Value}

\item{Primary_all}{Primary production data frame with crop areas and production}

\item{Impact_prod}{Impact data at production level with columns: Year, area_code, item_code, Impact, Value, u_FU}

\item{Crop_NPPr_NoFallow}{Crop NPP data excluding fallow periods}

\item{DTM}{Detailed Trade Matrix data (optional, depending on trade_mode)}

\item{trade_mode}{Character string: "gt" for gross trade or "dtm" for detailed trade matrix. Default is "gt".}
}
\value{
A named list containing all footprint data frames:
  \item{FP_prim}{Primary production footprints with economic allocation}
  \item{FP_prim_ds}{Primary product footprints including domestic supply}
  \item{FP_processed_raw}{Processed product footprints (raw calculation)}
  \item{FP_processed_ds}{Processed product footprints with domestic supply}
  \item{FP_feed}{Feed product footprints}
  \item{FP_feed_ds}{Feed product footprints with domestic supply}
  \item{FP_final}{Final comprehensive footprint data frame}
  \item{Seed_share}{Calculated seed shares by crop}
  \item{draught_shares}{Draught animal allocation shares}
}
\description{
Main workflow function that traces environmental footprints through global supply chains,
from primary production through processing, feed, and final products. This function
orchestrates the entire footprint calculation process and returns all intermediate
and final footprint data frames.
}
\details{
This function implements a complete footprint accounting system that:
\itemize{
  \item Calculates seed shares and removes them from production
  \item Allocates impacts to co-products using economic allocation
  \item Traces impacts through processing chains
  \item Accounts for international trade (gross trade or bilateral trade matrix)
  \item Handles feed products and livestock production
  \item Allocates draught animal services to crop production
}

The calculation requires that `load_general_data()` has been called first to load
all necessary coefficient tables and classification data.
}
\examples{
\dontrun{
library(afsetools)
load_general_data()

# Calculate footprints using gross trade
footprints <- calculate_footprints(
  CBS = my_cbs_data,
  Primary_all = my_primary_data,
  Impact_prod = my_impact_data,
  Crop_NPPr_NoFallow = my_npp_data,
  trade_mode = "gt"
)

# Access individual footprint tables
fp_primary <- footprints$FP_prim
fp_final <- footprints$FP_final
}
}
